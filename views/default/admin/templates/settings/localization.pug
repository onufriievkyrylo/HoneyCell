extends ../layouts/main

block content
    form
        fieldset(name='languages')
            legend=localization.language
            lable(for='languages.available')=settingsProperties.languages.available
            br
            select(name='languages.available', multiple)
                each name, key in settings.languages.all
                    option(value=key, selected=settings.languages.available.value.includes(key))= name
            p
            lable(for='languages.admin')=settingsProperties.languages.admin
            br
            select(name='languages.admin')
                each key in settings.languages.available.value
                    option(value=key,selected=(key==settings.languages.admin.value))=settings.languages.all[key]
            p
            lable(for='languages.client')=settingsProperties.languages.client
            br
            select(name='languages.client')
                each key in settings.languages.available.value
                    option(value=key,selected=(key==settings.languages.client.value))=settings.languages.all[key]
            p
        fieldset(name='format')
            legend=localization.format
            fieldset(name='date')
                legend=settingsProperties.format.date.name
                p#date= new Intl.DateTimeFormat(locale, dateformat).format(Date.now())
                lable(for='format.date.year')=settingsProperties.format.date.properties.year
                br
                select(name='format.date.year')
                    option(selected, value)= localization.skip
                    each key in settings.format.date.year.enum
                        option(value=key, selected=(key==settings.format.date.year.value))= settingsProperties.format.enum[key]
                p
                lable(for='format.date.month')=settingsProperties.format.date.properties.month
                br
                select(name='format.date.month')
                    option(selected, value)= localization.skip
                    each key in settings.format.date.month.enum
                        option(value=key, selected=(key==settings.format.date.month.value))= settingsProperties.format.enum[key]
                p
                lable(for='format.date.day')=settingsProperties.format.date.properties.day
                br
                select(name='format.date.day')
                    option(selected, value)= localization.skip
                    each key in settings.format.date.day.enum
                        option(value=key, selected=(key==settings.format.date.day.value))= settingsProperties.format.enum[key]
                p
                lable(for='format.date.weekday')=settingsProperties.format.date.properties.weekday
                br
                select(name='format.date.weekday')
                    option(selected, value)= localization.skip
                    each key in settings.format.date.weekday.enum
                        option(value=key, selected=(key==settings.format.date.weekday.value))= settingsProperties.format.enum[key]
                p
            fieldset(name='time')
                legend=settingsProperties.format.time.name
                p#time= new Intl.DateTimeFormat(locale, timeformat).format(Date.now())
                lable(for='format.time.hour')=settingsProperties.format.time.properties.hour
                br
                select(name='format.time.hour')
                    option(selected, value)= localization.skip
                    each key in settings.format.time.hour.enum
                        option(value=key, selected=(key==settings.format.time.hour.value))= settingsProperties.format.enum[key]
                p
                lable(for='format.time.minute')=settingsProperties.format.time.properties.minute
                br
                select(name='format.time.minute')
                    option(selected, value)= localization.skip
                    each key in settings.format.time.minute.enum
                        option(value=key, selected=(key==settings.format.time.minute.value))= settingsProperties.format.enum[key]
                p
                lable(for='format.time.second')=settingsProperties.format.time.properties.second
                br
                select(name='format.time.second')
                    option(selected, value)= localization.skip
                    each key in settings.format.time.second.enum
                        option(value=key, selected=(key==settings.format.time.second.value))= settingsProperties.format.enum[key]
                p
                lable(for='format.time.timeZoneName')=settingsProperties.format.time.properties.timeZoneName
                br
                select(name='format.time.timeZoneName')
                    option(selected, value)= localization.skip
                    each key in settings.format.time.timeZoneName.enum
                        option(value=key, selected=(key==settings.format.time.timeZoneName.value))= settingsProperties.format.enum[key]
                p
    script.
        $('select').change(function() {
            $.ajax({
                type: 'put',
                url: '/admin/settings',
                data: $(this).serialize().replace(/^|\&/g, '$&localization.'),
                success: function(data){
                    $('body').html(data);
                }
            });
        });